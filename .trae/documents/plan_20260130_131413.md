# 自动化测试用例设计方案

## 1. 创建测试目录结构
- 创建 `tests/` 目录
- 创建 `tests/__init__.py`
- 创建测试数据目录 `tests/fixtures/`

## 2. 创建测试数据文件
- `test_json_list.json` - JSON list 格式文件（5个元素）
- `test_json_dict.json` - JSON dict 格式文件
- `test_jsonl_10lines.jsonl` - JSONL 文件（10行）
- `test_jsonl_100lines.jsonl` - JSONL 文件（100行）
- `test_empty.json` - 空文件
- `test_single_line.json` - 单行 JSON 文件

## 3. 创建测试文件
- `tests/test_count_cli.py` - 测试 CLI 命令
- `tests/test_json_check_tools.py` - 测试工具函数

## 4. 测试用例覆盖

### `test_json_check_tools.py`
- `test_count_json_list_length_with_list` - 测试 list 类型返回正确长度
- `test_count_json_list_length_with_dict` - 测试 dict 类型返回 None
- `test_count_json_list_length_with_string` - 测试 string 类型返回 None

### `test_count_cli.py`
- `test_detect_and_count_jsonl_with_jsonl_file` - 测试 JSONL 文件检测
- `test_detect_and_count_jsonl_with_json_file` - 测试 JSON 文件检测
- `test_detect_and_count_jsonl_with_empty_file` - 测试空文件
- `test_count_jsonl_lines_fast` - 测试快速行数统计
- `test_main_with_json_flag` - 测试 --json 参数
- `test_main_with_jsonl_flag` - 测试 --jsonl 参数
- `test_main_auto_detect` - 测试自动检测模式

## 5. 更新 pyproject.toml
- 添加 pytest 依赖
- 配置测试命令